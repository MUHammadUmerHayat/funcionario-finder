<ngx-spinner
  bdColor = "rgba(51, 51, 51, 0.8)"
  size = "medium"
  color = "#fff"
  type = "ball-atom">
  <p style="font-size: 12px; color: white">Cargando...</p>
</ngx-spinner>

<!-- Search by CI or Name and display results -->
<div>
  <!-- Search box by CI or Name -->
  <form style="padding:.5rem 1rem" class=" bg-light">
    Búsqueda por Nombre o Cedula
    <input class="form-control mr-sm-2"
           name="search"
           [(ngModel)]="pattern" #name="ngModel"
           placeholder="Nombre o Cedula"
           aria-label="Search"
           (keydown)="ngOnAutocomplete($event, 1)">
    <div *ngIf="errorFuncionario">
      No se puede recuperar los datos. Por favor, intente más tarde.
    </div>
  </form>

  <!-- Data -->
  <div *ngIf="responseFuncionario">

    <app-pagination [totalPages]="responseFuncionario.totalPages"
                    (changeActivePage)="changePage($event)">
    </app-pagination>

    <table class="table table-hover table-striped">
      <caption>
        <strong> Total {{responseFuncionario.total}}</strong>
      </caption>
      <thead>
        <tr>
          <th class="text-left" scope="col">Nombre y Apellido (C.I.N°)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let funcionario of responseFuncionario.autocomplete"
           (click)="ngOnSelectedFuncionario(funcionario)">
            <td class="text-left">
              {{funcionario}}
            </td>
        </tr>

        <tr  *ngIf="responseFuncionario.autocomplete.length <= 0">
          <td class="text-left">
            Sin resultados
          </td>
        </tr>

      </tbody>
    </table>
  </div>
</div>

<!-- Search by CI and display salaries-->
<div>
  <form style="padding: .5rem 1rem" class=" bg-light">
    <input class="form-control mr-sm-2"
           name="search"
           [(ngModel)]="cedula" #name="ngModel"
           placeholder="Nro. de CI "
           aria-label="Search"
           (keydown.enter)="ngOnSearch()">
  </form>

  <br>
  <br>
  <div>
    <div *ngIf="foundMatch">
      <br>
      <h3> Datos del Funcionario </h3>
      <div id="id">
       <strong> Nombre y Apellido: </strong> {{responseDetails.results[0].nombres}} {{responseDetails.results[0].apellidos}}
        <br>
       <strong> Nro. Documento: </strong> {{responseDetails.results[0].codigoPersona}}
        <br>
        <strong> Año: </strong> 2018
      </div>

      <div class="table-responsive">
        <table class="table table-striped">
          <thead>

          <tr>
            <th class="text-left" *ngFor="let month of months">
              {{month}}
            </th>
          </tr>
          </thead>

          <tbody>

          <tr>
            <th class="text-left" *ngFor="let salary of getKeys(salary)">
              {{salary}}
            </th>
          </tr>

          <tr *ngIf="responseDetails.results.length <= 0">
            <td class="text-left">
              Sin resultados
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div *ngIf="errorDetails">
      No se puede recuperar los datos. Por favor, intente más tarde.
    </div>

    <div *ngIf="!foundMatch && searched">
      Sin resultados
    </div>

  </div>

</div>
<br>
<br>
